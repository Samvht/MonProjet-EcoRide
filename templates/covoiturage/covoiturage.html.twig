{% extends 'base.html.twig' %}

{% block title %}Covoiturage{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/covoiturage.css') }}">
{% endblock %}

{% block body %}
<!--<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>-->

<!--<div class="example-wrapper">
    <h1>Hello {{ controller_name }}! ✅</h1>-->

<!--formulaire rechercher-->
<form class="rechercher" method="POST" action="{{ path('app_covoiturage') }}"><!--formulaire rechercher-->
    {{ form_start(form) }}
    {{ form_row(form.lieu_depart) }}
    {{ form_row(form.lieu_arrivee) }}
    {{ form_row(form.date_depart) }}
    <button id="btn_rechercher" type="submit">Rechercher</button>
    {{ form_end(form) }}
</form>

{% if results is defined %}
    <ul class="result">
        {% for covoiturage in results %}
            <li>
                <div>
                    {% set createur = covoiturage.getCreateur() %}
                    {% if createur.getPhoto() %}
                        <img src="{{ asset('uploads/photos/' ~ createur.getPhoto()) }}" alt="Photo de Profil de l'utilisateur" width="50">
                    {% else %}
                        <img src="{{ asset('uploads/photos/default.jpeg') }}" alt="Pas de photo" width="50">
                    {% endif %}
                    <p>{{ createur.getPseudo() }}</p>
                

                    <div>
                        <p>{{ covoiturage.getDateDepart() }} - {{ covoiturage.getHeureDepart() }}</p>
                        <p>{{ covoiturage.getDateArrivee() }} - {{ covoiturage.getHeureArrivee() }}</p>
                        <p>Nombre de place disponible : {{ covoiturage.getNbrePlace() }}</p>
                        <p>Voyage écologique : {{ covoiturage.isVoyageEcologique() ? 'Oui' : 'Non' }}</p>
                        <p>Prix : {{ covoiturage.getPrixPersonne() }}</p>
                    </div>

                    <a href="{{ path('detail', { 'covoiturage_id': covoiturage.getCovoiturageId() }) }}">
                        <button id="btn_detail">Détails</button>
                    </a>

                </div>
            </li>
        {% else %}
            <li>Aucun covoiturage trouvé pour ces critères.</li>
        {% endfor %}
    </ul>
{% endif %}
{% endblock %}